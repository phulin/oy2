name = "oy2-backup"
main = "./src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[placement]
mode = "smart"

# Hyperdrive - same DB as main worker
[[hyperdrive]]
binding = "HYPERDRIVE"
id = "f9cd31eff0a444f0b02cca63f470a151"

# R2 bucket for backups
[[r2_buckets]]
binding = "BACKUP_BUCKET"
bucket_name = "oy2-db-backups"

# Run at 5 AM EST = 10 AM UTC
[triggers]
crons = ["0 10 * * *"]

[observability]
enabled = true
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true
